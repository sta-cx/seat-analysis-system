# 实施计划

- [x] 1. 建立项目基础架构和核心接口


  - 创建 TypeScript 类型定义和接口
  - 设置状态管理结构（Zustand store）
  - 配置数据库连接和基础服务
  - _需求: 1.1, 6.5, 7.3_

- [-] 2. 实现数据模型和数据库操作


- [ ] 2.1 创建数据库表结构和模型






  - 实现 SQLite 数据库表创建脚本
  - 编写数据模型 TypeScript 接口
  - 创建数据库连接和基础 CRUD 操作
  - _需求: 7.1, 7.2, 7.3_


- [ ] 2.2 实现数据访问层服务

  - 编写数据库服务类，包含查询、插入、更新操作
  - 实现数据缓存机制
  - 创建数据验证和错误处理
  - _需求: 6.5, 7.4_

- [ ] 2.3 实现外部 API 数据获取服务

  - 创建 API 服务类，连接 datayes.com API
  - 实现数据获取、解析和存储流程
  - 添加错误处理和重试机制
  - _需求: 6.1, 6.2, 6.3_

- [ ] 3. 实现核心计算引擎
- [ ] 3.1 实现加权合约计算功能

  - 编写加权合约计算算法
  - 实现持仓权重计算和价格加权
  - 添加新品种自动处理逻辑
  - _需求: 7.1, 7.2, 7.4_

- [ ] 3.2 实现席位分析指标计算

  - 编写实多空指标计算函数
  - 实现净多空指标计算函数
  - 创建流多空指标计算函数
  - _需求: 9.1, 9.2, 9.3_

- [ ] 3.3 实现趋势和盈亏指标计算

  - 编写趋势指标计算算法（5/15/30 日）
  - 实现盈亏指标计算（15/60/120 日）
  - 添加历史数据回溯功能
  - _需求: 9.4, 7.5_

- [ ] 4. 创建主页面布局组件
- [ ] 4.1 实现 MainLayout 主布局组件

  - 创建 Flexbox 布局结构（左 75%右 25%）
  - 实现左列上下分割（40%:60%）
  - 实现右列四格分割（30:30:10:30）
  - _需求: 1.1_

- [ ] 4.2 实现页面样式和主题

  - 设置左列纯黑背景和右列交替背景色
  - 实现分割线样式（1px #aaa）
  - 配置字体颜色和大小规范
  - _需求: 1.1_

- [ ] 5. 实现 K 线图组件
- [ ] 5.1 创建 KLineChart 组件基础结构

  - 使用 ECharts 创建 K 线图组件
  - 实现红色空心阳线和绿色空心阴线
  - 添加透明数据窗口显示
  - _需求: 1.2, 1.5_

- [ ] 5.2 实现 K 线图交互功能

  - 添加右键菜单"加入自选"功能
  - 实现鼠标滚轮切换品种功能
  - 创建双 X 轴十字光标同步机制
  - _需求: 1.3, 1.4_

- [ ] 6. 实现指标区组件系统
- [ ] 6.1 创建指标区模版切换机制

  - 实现模版 1（三行分割）和模版 2（单区域）切换
  - 创建指标类型状态管理
  - 添加模版切换动画效果
  - _需求: 2.1, 2.2, 2.3_

- [ ] 6.2 实现模版 1 指标显示（实多空/净多空/流多空）

  - 创建三行指标显示布局
  - 实现折线图和柱状图渲染
  - 添加指标名称和数值显示
  - _需求: 2.1, 2.2, 2.3, 9.5_

- [ ] 6.3 实现模版 2 指标显示（净持六/趋势六/盈亏六）

  - 创建单区域曲线显示
  - 实现席位曲线添加和删除功能
  - 添加透明数据窗口和擦除按钮
  - _需求: 2.4, 2.5, 2.6_

- [ ] 6.4 实现饼图二指标显示

  - 创建持仓分布环图和持仓变化环图
  - 实现内外环交互和浮动窗口
  - 添加小席位合并为"其他"功能
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 7. 实现数据表组件
- [ ] 7.1 创建持仓数据表组件

  - 实现 8 列数据表格显示
  - 添加颜色编码（黄字、红字、绿字）
  - 实现双向排序功能
  - _需求: 3.1, 3.2, 3.5_

- [ ] 7.2 创建席位数据表组件

  - 实现 8 列席位数据显示
  - 添加席位名称点击交互
  - 实现表格滚动和排序功能
  - _需求: 3.3, 3.4, 3.5_

- [ ] 8. 实现按钮区和自选列表
- [ ] 8.1 创建按钮区组件

  - 实现简拼输入框和下拉功能
  - 创建品种显示框和右键菜单
  - 添加 7 个功能按钮（多颜色区分）
  - _需求: 8.1, 8.2, 8.3, 8.4_

- [ ] 8.2 创建自选列表组件

  - 实现 8x8 网格按钮布局
  - 添加拖拽排序功能
  - 实现右键删除和点击切换功能
  - _需求: 8.5_

- [ ] 9. 实现副页面筛选系统
- [ ] 9.1 创建副页面布局和筛选条件表

  - 实现 25%宽度 75%高度副页面
  - 创建 10 行 6 列筛选条件表格
  - 添加下拉选择和复选框控件
  - _需求: 5.1, 5.2_

- [ ] 9.2 实现筛选逻辑和结果显示

  - 编写 9 种筛选条件的逻辑算法
  - 实现筛选结果表（6x6 网格）
  - 添加执行筛选和导出结果功能
  - _需求: 5.3, 5.4, 5.5_

- [ ] 10. 实现数据更新系统
- [ ] 10.1 创建自动更新调度器

  - 实现定时更新机制（4:30/5:00/5:30/6:00）
  - 添加手动更新按钮功能
  - 创建更新状态显示和时间戳
  - _需求: 6.1, 6.3, 6.4_

- [ ] 10.2 实现错误处理和通知系统

  - 创建错误类型定义和处理策略
  - 实现错误通知显示
  - 添加自动重试和降级机制
  - _需求: 6.2_

- [ ] 11. 集成测试和性能优化
- [ ] 11.1 实现组件集成和数据流测试

  - 编写组件交互测试用例
  - 测试状态管理和数据同步
  - 验证用户操作流程完整性
  - _需求: 1.2, 2.4, 3.4, 5.5_

- [ ] 11.2 实现性能优化和内存管理

  - 添加组件缓存和虚拟滚动
  - 优化图表渲染和数据计算
  - 实现内存清理和资源管理
  - _需求: 6.5_

- [ ] 12. 最终集成和部署准备
- [ ] 12.1 完成系统集成和端到端测试

  - 集成所有组件和功能模块
  - 执行完整的用户场景测试
  - 验证数据准确性和系统稳定性
  - _需求: 所有需求_

- [ ] 12.2 优化用户体验和错误处理
  - 完善交互反馈和加载状态
  - 优化错误提示和用户引导
  - 添加系统帮助和使用说明
  - _需求: 6.2, 8.4, 8.5_
