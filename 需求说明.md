    席位分析系统需求说明
一、系统需求
1. 系统概述
 *本系统是基于本地数据库，本地显示，单用户使用。除了外部api，其他的数据运转都是在本地。
 *本系统基于React + TypeScript + Vite技术栈构建.
 *前端显示采用主页面+副页面双页面设计，主页面为全视口常驻页面，副页面为小页面。
 *使用dash的回调动态实现两个页面之间的切换，小页面作为活动页面时，大页面不退出，作为小页面的背景板。
 *由于本地数据本地显示的特点，页面之间可取消数据共享，由页面直接向数据库取数据，以提高页面显示速度
 *本系统的数据更新频次是每日更新，由于不同交易所更新数据的时间不同，需要在交易日的下午四点半，五点，五点半和六点自动更新四次。
 *外部api请求失败或者数据异常时要有错误提醒
 *设置手动更新按钮，以便自动更新失败或者数据异常时用手完成更新
 *更新数据后显示时间戳，避免重复更新
 *前端需要的所有数据要在数据库设置缓存，以增加访问速度
 *本系统旨在处理 6 家期货交易所近 120 个期货品种的行情数据和席位持仓数据，实现以下核心功能：
 >>K 线图展示
 >>多维度指标组（折线图、柱线图）
 >>分析图表（饼图、表单）
 >>专业席位分析工具
 >>多条件组合筛选系统

2. 数据源规范
API 接入参数
 域名：https://api.datayes.com
 Token：136a9f3b5bba87f5785a2beb80e5780d03edfebced02cf98b4ed58cc1b34886d
 请求头：{"Authorization":"Bearer","Accept-Encoding":"gzip,deflate"}
核心 API
 getMktFutd：期货日行情
 getMktFutMLR：会员多头持仓排名
 getMktFutMSR：会员空头持仓排名
 getTradeCal：交易日历
 getSysCode：参数常量
 getPartyID：公司基本信息
 getSecID：证券编码及基本上市信息

3. 数据库设计
行情数据表
 CREATE TABLE market_data (
 trade_date TEXT NOT NULL, -- 交易日 (YYYYMMDD)
 contract_id TEXT NOT NULL, -- 合约代码
 secShortName TEXT NOT NULL, --合约简称
 prev_close REAL, -- 昨收盘
 prev_settle REAL, -- 昨结算
 open REAL, -- 开盘价
 high REAL, -- 最高价
 low REAL, -- 最低价
 close REAL, -- 收盘价
 settle REAL, -- 结算价
 volume INTEGER, -- 成交量
 turnover REAL, -- 成交金额
 open_interest INTEGER, -- 持仓量
 is_main BOOLEAN, -- 主力合约标记
 is_continuous BOOLEAN, -- 连续合约标记
 contract_unit INTEGER, -- 合约单位
 PRIMARY KEY (trade_date, contract_id)
 );

席位持仓原始表
 CREATE TABLE holding_raw (
 id INTEGER PRIMARY KEY AUTOINCREMENT,
 trade_date TEXT NOT NULL, -- 交易日 (YYYYMMDD)
 contract_id TEXT NOT NULL, -- 合约代码
 secShortName TEXT NOT NULL, --合约简称
 seat_name TEXT NOT NULL, -- 席位简称
 long_vol INTEGER DEFAULT 0, -- 持买单量
 short_vol INTEGER DEFAULT 0, -- 持卖单量
 long_chg INTEGER DEFAULT 0, -- 买单变化量
 short_chg INTEGER DEFAULT 0, -- 卖单变化量
 UNIQUE (trade_date, contract_id, seat_name)
 );

加权合约表
 CREATE TABLE weighted_contracts (
 trade_date TEXT NOT NULL,
 commodity_id TEXT NOT NULL, -- 品种 ID
 commodity_name TEXT NOT NULL, --品种简称
 open REAL, -- 加权开盘价
 high REAL, -- 加权最高价
 low REAL, -- 加权最低价
 close REAL, -- 加权收盘价
 settle REAL, -- 加权结算价
 volume INTEGER, -- 总成交量
 open_interest INTEGER, -- 总持仓量
 PRIMARY KEY (trade_date, commodity_id)
 );

席位分析汇总表
 CREATE TABLE seat_analysis (
 trade_date TEXT NOT NULL, --交易日
 commodity_id TEXT NOT NULL,--品种 ID
 commodity_name TEXT NOT NULL, --品种简称
 seat_name TEXT NOT NULL, --席位简称
 long_vol INTEGER NOT NULL DEFAULT 0, --持买单量
 short_vol INTEGER NOT NULL DEFAULT 0, --持卖单量
 long_chg INTEGER NOT NULL DEFAULT 0, --买单变化量
 short_chg INTEGER NOT NULL DEFAULT 0,--卖单变化量
 net_vol INTEGER GENERATED ALWAYS AS (long_vol - short_vol) STORED,--净持仓量
 net_chg INTEGER GENERATED ALWAYS AS (long_chg - short_chg) STORED,--净持增减
 PRIMARY KEY (trade_date, commodity_id, seat_name)
 );

4. 核心功能需求

4.1 加权合约生成
 *数据来源：
  >>加权合约表
  >>行情数据表
 *数据计算
  >>总持仓量 = 同品种的 Σ各月份合约持仓量
  >>总成交量 = 同品种的 Σ各月份合约成交量
  >>持仓权重 = 合约持仓量 / 总持仓量
  >>加权价格 = Σ(合约价格 × 合约权重)
 *自动处理新上市品种
 *只计算同品种合约
 *排除持仓量为 0 的合约
 *保留两位小数
 *每日收到新数据后计算一次

4.2 持仓数据表
 *列数据组成：八列数据：席位名称、多头持仓、多头增减、空头持仓、空头增减、净持仓量、净持增减、持仓占比
  >>多头持仓(long_vol): 黄字,支持双向排序
  >>多头增减 c(long_chg): 红字,正值的前面加+号,负值的前面加-号,支持双向排序
  >>空头持仓(short_vol): 黄字,支持双向排序
  >>空头增减(short_chg): 绿字, 正值的前面加+号,负值的前面加-号,支持双向排序
  >>净持仓量(net_vol) : 黄字, 正值的前面加+号,负值的前面加-号,支持双向排序
  >>净持增减(net_chg): 正值用红色,前面加+号,负值用绿色,前面加-号,支持双向排序
  >>持仓占比(ABS(net_vol) / total_open_interest), net_vol>0 时用红色, net_vol<0 时绿色
 *排序及功能
  >>点击表头切换排序，净持仓量，按绝对值降序,其他列正常排序
  >>点击“净持六”按钮(见可视化需求--按钮区)时,在指标区（可视化需求--指标区）显示本表“净持仓量”列按绝对值排序的前六席位250个交易日的净持仓曲线
  >>显示所有席位数据，滚动支持

4.3 席位数据表
 *列数据组成：八列数据：席位简称、盈亏15、盈亏60、盈亏120、空列，趋势05、趋势15、趋势 30
 *盈亏列数据来源
  >>今日净持仓量: holding_raw 表
  >>昨日净持仓量 holding_raw 表
  >>今结算价 market_data 表
  >>昨结算价 market_data 表
  >>合约单位 market_data 表
 *盈亏列数据计算（数据回溯120天）：
  >>单日盈亏 = (今日净持仓量 × 今结算价 - 昨日净持仓量 × 昨结算价)× 合约单位
  >>盈亏 15 = 15 个交易日单日盈亏累和
  >>盈亏 60 = 60 个交易日单日盈亏累和
  >>盈亏120 = 120 个交易日单日盈亏累和
 *趋势列数据计算来源: 今日净持仓量-- holding_raw 表
 *趋势列数据计算(数据回溯30天)：
  >>趋势 05: max(abs(今日净持仓量- 5日内净持仓量的最小值), abs(今日净持仓量- 5日内净持仓量的最大值))
  >>趋势 15: max(abs(今日净持仓量-15日内净持仓量的最小值), abs(今日净持仓量-15日内净持仓量的最大值))
  >>趋势 30: max(abs(今日净持仓量-30日内净持仓量的最小值), abs(今日净持仓量-30日内净持仓量的最大值))
 *排序及功能
  >>反复点击“盈亏六”按钮（可视化需求--按钮区）时，在指标区（可视化需求--指标区）循环显示盈亏15（默认前6席位），盈亏60（默认前6席位），盈亏120（默认前6席位）席位250个交易日净持仓曲线
  >>反复点击“趋势六”按钮（可视化需求--按钮区）时，在指标区（可视化需求--指标区）循环显示趋势05（默认前6席位），趋势15（默认前6席位）， 趋势30（默认前6席位）席位250个交易日净持仓曲线
  >>显示全部席位的数据，支持滚动
 
4.4 实多空指标组  使用回调（Callback）动态来切换不同的模版，切换按钮
 *指标组由三组指标线组成：
  >>实多空10系列（实多10，实空10，实差10）
  >>实多空20系列（实多20，实空20，实差20）
  >>实多空X系列（实多X，实空X，实差X）
 *数据来源
  >>持买单量(long_vol)-- holding_raw 表
  >>持卖单量(short_vol)-- holding_raw 表
  >>净持仓量(net_vol) -- seat_analysis 表
 *计算过程 :把所有席位的持买单量和持买单量两组数合并成一组(注意不是相加)后,从大到小排序,分别选前10席位/前20席位/所有席位.
 *实多空10指标组
  >>指标线名 实多 10: 为排名前10席位中,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 实空 10: 为排名前10席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 实差 10: 实多10-实空10. 黄色,虚线,独立坐标
 *实多空20指标组
  >>指标线名 实多20: 为排名前20 席位中,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 实空20: 为排名前20 席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 实差20: 实多20-实仓20. 黄色,虚线,独立坐标
 *实多空X指标组
  >>指标线名 实多X: 为所有席位中,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 实空X: 为所有席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 实差X: 实多X-实空X. 黄色,虚线,独立坐标
 *点击“实多空”按钮（可视化需求-按钮区），在指标区（可视化需求--指标区）分成上下三行显示该组指标线(显示250个交易日的数据)

4.5 净多空指标组
 *指标组由三组指标线组成：
  >>净多空10系列（净多10，净空10，净差10）
  >>净多空20系列（净多20，净空20，净差20）
  >>净多空X系列（净多X，净空X，净差X）
 *数据来源
  >>净持仓量(net_vol) -- seat_analysis 表
 *计算过程 :把所有席位的净持仓量取绝对值后,从大到小排序,分别选前10席位/前20席位/所有席位.
 *净多空10指标组
  >>指标线名 净多10: 为排名前10席位中,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 净空10: 为排名前10席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 净差10: 净多10-净空10. 黄色,虚线,独立坐标
 *净多空20指标组
  >>指标线名 净多20: 为排名前20 席位中,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 净空20: 为排名前20 席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 净差20: 净多20-净空20. 黄色,虚线,独立坐标
 *净多空X指标组
  >>指标线名 净多X: ç,净持仓量大于0的净持仓量累计和.红色,实线
  >>指标线名 净空X: 为所有席位中,净持仓量小于0的净持仓量累计和的绝对值.绿色,实线
  >>指标线名 净差X: 净多X-净空X. 黄色,虚线,独立坐标
 *点击“净多空”按钮（可视化需求-按钮区），在指标区（可视化需求--指标区）分成上下三行显示该组指标线(显示250个交易日的数据)

4.6 流多空指标组
 *指标组由四组柱线：
  >>流多空10系列（加多10，加空10，减多10，减空10）
  >>流多空20系列（加多20，加空20，减多20，减空20）
  >>流多空X系列（加多X，加空X，减多X，减空X）
 *数据来源
  >>净持仓量(net_vol) -- seat_analysis 表
  >>净持增减(net_chg)-- seat_analysis 表
 *计算过程:把所有席位的净持仓量取绝对值后,从大到小排序,分别取前10席位/前20席位/所有席位
 *流多空10指标组
  >>加多10为排名前10席位中, 净持仓量>0 净持增减>0 的席位中净持仓量的累计和-- 红色 柱线,空心
  >>加空10为排名前10席位中, 净持仓量<0 净持增减<0 的席位中净持仓量的累计和的绝对值—绿色 柱线, 空心
  >>减多10为排名前10席位中, 净持仓量>0 净持增减<0 的席位中净持仓量的累计和,取负值—绿色 柱线 空心
  >>减空10为排名前10席位中, 净持仓量<0 净持增减>0 的席位中净持仓量的累计和 – 红色 柱线 空心
 *流多空20指标组
  >>加多20为排名前20席位中, 净持仓量>0 净持增减>0 的席位中净持仓量的累计和-- 红色 柱线,空心
  >>加空20为排名前20席位中, 净持仓量<0 净持增减<0 的席位中净持仓量的累计和的绝对值—绿色 柱线, 空心
  >>减多20为排名前20席位中, 净持仓量>0 净持增减<0 的席位中净持仓量的累计和,取负值—绿色 柱线 空心
  >>减空20为排名前20席位中, 净持仓量<0 净持增减>0 的席位中净持仓量的累计和 – 红色 柱线 空心
 *流多空X指标组
  >>加多X为所有席位中,净持仓量>0 净持增减>0 的席位中净持仓量的累计和-- 红色 柱线,空心
  >>加空X为所有席位中,净持仓量<0 净持增减<0 的席位中净持仓量的累计和的绝对值—绿色 柱线, 空心
  >>减多X为所有席位中,净持仓量>0 净持增减<0 的席位中净持仓量的累计和,取负值—绿色 柱线 空心
  >>减空X为所有席位中,净持仓量<0 净持增减>0 的席位中净持仓量的累计和 – 红色 柱线 空心
 *点击“流多空”按钮（可视化需求-按钮区），在指标区（可视化需求--指标区）分成上下三行显示该组柱线(显示250个交易日的数据)

4.7 持仓分布环图：显示品种当日的席位持仓情况汇总
 * 用内外两个圆环分别表示某品种的席位持仓量的多空分布细节
  >>外环表示各席位的持仓量比例组成
   #外环顶部中间位置开始沿顺时针方向按席位净多持仓量从大到小排布，用明显颜色对比区分相邻席位
   #外环顶部中间位置开始沿逆时针方向按席位净空持仓量的绝对值从大到小排布，用明显颜色对比区分相邻席位
   #鼠标对应某区位时，高亮显示本区位，浮动透明数据窗显示“席位名称”，“持仓量”，“持仓比”三项。
   #持仓比大于1%的席位在外环对应位置显示对应数据，小于1%的席位不在外环单独显示，合并成一个席位，持仓量和持仓比数据均为这些席位的数据累和
  >>内环表示净多总持仓和净空总持仓的比例分布
   #环顶中间位置右侧显示净多持仓量的数据，用红色，环内标注“多”字，鼠标对应该区域时浮动透明窗分别显示：“多” “持多量”（内环），“持多比”三项
   #环顶中间位置左侧显示净空持仓量的数据，用绿色，环内标注“空”字，鼠标对应该区域时浮动透明窗分别显示：“空” “持空量”（内环），“持空比”三项 。
 *数据来源：净持仓量(net_vol) -- seat_analysis 表
 *显示项目计算
  >>持仓量（外环）：净持仓量，显示数值时带+，-符号
  >>持仓比（外环）：abs（席位净持仓量）/abs(席位净持仓)的累和*100
  >>持多量（内环）：净持仓量>0的席位净持仓量的累和 显示时带 + 号
  >>持多比（内环）：(净持仓量>0的席位净持仓量的累和)/abs(席位净持仓)的累和*100
  >>持空量（内环）：净持仓量>0的席位净持仓量的累和，因本身值就带 - 号，所以不用再加 - 号
  >>持空比（内环）：abs(净持仓量<0的席位净持仓量）的累和/abs(席位净持仓)的累和*100  

4.8 持仓变化环图：显示品种当日的持仓增减量情况汇总
 * 用内外两个圆环分别表示某品种当日的席位持仓量变化情况的多空分布细节
  >>外环表示各席位当日的持仓变化量的比例组成
   #外环顶部中间位置开始沿顺时针方向按当日席位净多持仓变化量从大到小排布，用明显颜色对比区分相邻席位
   #外环顶部中间位置开始沿逆时针方向按当日席位净空持仓变化量的绝对值从大到小排布，用明显颜色对比区分相邻席位
   #鼠标对应某区位时，高亮显示本区位，浮动透明数据窗显示“席位名称”，“增减量”，“增减比”三项。
   #增减比大于1%的席位在外环对应位置显示对应数据，小于1%的席位不在外环单独显示，合并成一个席位，增减量和增减比数据均为这些席位的数据累和
  >>内环表示净多总变化量和净空总变化量的比例分布
   #环顶中间位置右侧显示净多总变化量的数据，用红色，环内标注“多”字，鼠标对应该区域时浮动透明窗显示“多”，“流多量”，“流多比”。
   #环顶中间位置左侧显示净空总变化量的数据，用绿色，环内标注“空”字，鼠标对应该区域时浮动透明窗显示“空”，“流空量”，“流空比”。
 *数据来源：
  >>净持仓量(net_vol) -- seat_analysis 表
  >>净持增减(net_chg) -- seat_analysis 表
 *数据计算
  >>增减量（外环）：净持增减，显示数据时直接带 + - 号
  >>增减比（外环）：abs（净增持量）/abs（净增持量）的所有席位日累和
  >>流多量（内环）：净增持量>0的席位的净增持量日累和
  >>流多比（内环）：净增持量>0的席位的净增持量日累和/abs（净增持量）的所有席位日累和
  >>流空量（内环）：净增持量<0的席位的净增持量的绝对值的日累和
  >>流多比（内环）：净增持量>0的席位的净增持量的绝对值的日累和/abs（净增持量）的所有席位日累和

4.9 条件筛选系统
 *筛选要求
  >>只筛选所有的加权合约，不筛选月份合约
  >>使用本日数据为基础条件，用数据回溯以前某固定日期的数据
  >>支持多条件组合筛选(默认当日)
 *数据来源：
  >>加权合约表:收盘价(close REAL)
  >>实多空指标组:实多10，实空10，实差10，实多20，实空20，实差20，实多X，实空X，实差X，
  >>净多空指标组:净多10，净空10，净差10，净多20，净空20，净差20，净多X，净空X，净差X，
 *筛选条件:
  >>收盘价条件为（5/8/13/21日内（最高/最低）
  >>实多(10/20/X)(大于/小于)实空(10/20/X）
  >>净多(10/20/X)(大于/小于)净空(10/20/X）
  >>实多(10/20/X)是(5/8/13/21)日内的(最大/最小）
  >>实空(10/20/X)是(5/8/13/21)日内的(最大/最小）
  >>实差(10/20/X)是(5/8/13/21)日内的(最大/最小）
  >>净多(10/20/X)是(5/8/13/21)日内的(最大/最小）
  >>净空(10/20/X)是(5/8/13/21)日内的(最大/最小）
  >>净差(10/20/X)是(5/8/13/21)日内的(最大/最小）
 *点击“开始筛选”（可视化需求-副页），按照上述条件的任意组合条件（可选）执行筛选
 *点击“导出结果”（可视化需求-副页），将少选结果导入“筛选结果表”（可视化需求-副页）
 *点击“筛选结果表”品种简称联动更新以下区域：K线区/指标区/持仓数据表表/席位数据表。

二、可视化需求
1、总体原则
  1.1 显示采用主页面+副页面双页面设计，主页面为全视口常驻页面，副页面为小页面。    
  1.2 使用dash的回调动态实现两个页面之间的切换，小页面作为活动页面时，大页面不退出，作为小页面的背景板。
  1.3 主页面按钮区内设置“副页面”按钮，点击激活副页面

2、主页面     
  2.1 功能设置
    * 主页面模块组成：k线区，指标区，持仓数据表，席位数据表，按钮区，自选股列表
  2.2 布局说明
    * 将视口页面分为两列，使用Flexbox 实现页面的一级水平分割，左右比例为75:25
    * 再次使用 Flexbox 实现二级垂直分割将左列分为上下两格 上下格高度比例为40:60，
    * 左列上格为k线区，下格为指标区。
    * 再次使用 Flexbox 实现二级垂直分割将右列从上到下分为4个格，格的高度比例从上到下分别为30:30:10:30。
    * 右列从上到下：第一格为持仓数据表，第二格为席位数据表，第三格为按钮区，最下格为自选列表
  2.3 显示要素
    * 不显示项目名称，比如持仓分析系统类的字样
    * 不显示左右列之间的分割线
    * 左列显示上下格分割线，线宽1px，颜色#aaa。
    * 左列背景设置为纯黑色，
    * 右列选择两种利于衬托表格数字和文字的的背景颜色，在四个格子间交替使用，并且所选颜色要和左列纯黑背景有视觉差
 
3、k线区 （左列上格，高度40%）
  3.1 功能设置
    * 用于显示各品种的k线图
    * 阳线红色空心,阴线绿色空心
    * 右键功能支持：右键点击k线，选择“加入自选”，将该品种加入自选股列表
    * 联动关系:点击--自选列表的品种简称/筛选结果表的品种简称/按钮区的品种简称，k线对应显示。  
    * 滚轮在k线区滚动时，顺序显示“自选列表”的品种k线图
  3.2 显示要素
    * 透明数据显示窗停靠在K线区左侧,显示：
     【品种简称
      -- 数据
      涨幅
      --数据
      收盘价
      --数据
      昨结
      --数据
      成交量
      --数据
      持仓量
      --数据】
    *双X轴的十字光标与指标区同步：k线区的X轴线比较k线区域的数值高低，指标区域的X轴比较指标数值大小，共用Y轴

x，指标区模版说明（此处为后加文字，为了不改动原文本序号，此节用“x”表示）
    * 指标区共有两个指标显示模版，用回调动态实现模版切换，其中：
      # 模版1是将指标区分为上下三个格
      # 模版2是将指标区作为一个独立区域，不分格
    * 模版1对应显示的指标组为：实多空指标组，净多空指标组，流多空指标组。
    * 按钮区的“实多空”，“净多空”，“流多空”三个按钮为模版1的切换按钮
    * 模版2对应显示的指标组为：净持六指标组，趋势六指标组，盈亏六指标组，饼图二指标组
    * 按钮区的“净持六”，“趋势六”，“盈亏六”，“饼图二”四个按钮为模版2的切换按钮

4、指标区模版1（显示实多空，净多空，流多空指标组）
  4.1 功能设置    
    * 与"实多空"（折线图） "净多空" （折线图）"流多空"（柱线图）按钮联动时，指标区分成上下三格，其中：
       # 指标区上格显示"实多空" "净多空" "流多空"指标组的10系列指标线，具体要求见（系统需求书4.4/4.5/4.6中关于10系列指标的说明）
       # 指标区中格显示"实多空" "净多空" "流多空"指标组的20系列指标线，具体要求见（系统需求书4.4/4.5/4.6中关于20系列指标的说明）
       # 指标区下格显示"实多空" "净多空" "流多空"指标组的X系列指标线，具体要求见（系统需求书4.4/4.5/4.6中关于X系列指标的说明）
  4.2 布局说明
    * 使用回调动态实现与指标区模版1和模版2的显示切换
  4.3 显示要素
    * 使用该模版时，指标区被分为上中下三格   
    * 在上中下三个格子中每个格子的左上角从左向右顺序显示指标名称和指标数值，以上格为例：实多10:125.36 实空10:95.63 实差10:29.73，中格下格同例
    * 全局双X轴光标与K线区同步；

5、指标区模版2用于--净持六，趋势六，盈亏六指标组
  5.1 功能设置   
    * 当点击净持六按钮时，显示系统需求书4.2的持仓数据表中的“净持仓量”列（默认前6席位）席位净持仓曲线组
    * 当反复点击趋势六按钮时，循环显示系统需求书4.3的席位数据表中的趋势05（默认前6席位），趋势15（默认前6席位），趋势30（默认前6席位）席位净持仓曲线组
    * 当反复点击盈亏六按钮时，循环显示系统需求书4.3的席位数据表所要求的盈亏15（默认前6席位），盈亏60（默认前6席位），盈亏120（默认前6席位）席位净持仓曲线组   
    * 支持在默认六条曲线的基础上点击席位名称再增加曲线
  5.2 布局说明
    * 使用回调动态实现与指标区模版1和模版3的显示切换
  5.3 显示要素：
    * 使用该模版时指标不分格，使用一格显示指标内容 
    * 透明数据窗口停靠在指标区最左侧,按照鼠标位置的曲线从上到下分别显示这些数据：
     [指标名称（例如趋势15）
      席位简称--数据
      席位简称--数据
      席位简称--数据
      ......]
    * 指标名称全项：趋势05/趋势15/趋势30/盈亏15/盈亏60/盈亏120/净持00（净持00对应净持六按钮的曲线，只有一组）
    * 指标区中心位置底部显示”擦除按钮”,点按钮擦除所有曲线,再点击席位名重新添加曲线
    * 鼠标点选某条曲线时,其他曲线隐藏，不点选某线时,显示全部曲线
    * 全局双X轴光标与K线区同步；

6、指标区模版2用于--饼图二指标组 
  6.1 功能设置      
    * 当点击并图二按钮时，显示系统需求书（4.7～4.8）的所描述的“持仓分布环图”和“持仓变化环图”。显示位置：持仓变化环图在左，持仓分布环图在右
  6.2 布局说明
    * 使用回调动态实现与指标区模版1和模版2的显示切换
  6.3 显示要素
    * 鼠标对应持仓分布图外环任意区位时，高亮显示本区位，浮动透明数据窗分别显示：席位简称/持仓量-数据/持仓比-数据。显示顺序：从上到下排列
    * 鼠标对应持仓变化图外环任意区位时，高亮显示本区位，浮动透明数据窗分别显示：席位名称/增减量-数据/增减比-数据。显示顺序：从上到下排列
    * 鼠标对应持仓分布图内环“多”区位时，高亮显示本区位，浮动透明数据窗分别显示：多/持多量-数据/持多比-数据。显示顺序：从上到下排列
    * 鼠标对应持仓分布图内环“空”区位时，高亮显示本区位，浮动透明数据窗分别显示：空/持空量-数据/持空比-数据。显示顺序：从上到下排列
    * 鼠标对应持仓变化图内环“多”区位时，高亮显示本区位，浮动透明数据窗分别显示：多/流多量-数据/流多比-数据。显示顺序：从上到下排列
    * 鼠标对应持仓变化图内环“空”区位时，高亮显示本区位，浮动透明数据窗分别显示：空/流空量-数据/流空比-数据。显示顺序：从上到下排列
    * “持仓比”和“增减比”小于1%的所有席位，不在外环单独显示，合并成一个席位，席位名称为“其他”，持仓量，持仓比，增减量，增减比数据均为这些席位的相应数据累和。数据显示方式同上
    * 饼图二指标组不使用全局十字光标，指标区内不使用光标

7、持仓数据表（右列上一格，高度30%）：
  7.1 功能设置
    * 按照系统需求4.2的要求显示相关数据.
  7.2 布局说明
    * 页面显示8行8列，滚动支持显示全部席位数据
    * 用-Dash DataTable实现表格
    * 表头：｜席位名称｜多头持仓｜多头增减｜空头持仓｜空头增减｜净持仓量｜净持增减｜持仓占比。
  7.3 显示要素
    * 表头设置排序按钮，支持双向排序
    * 显示表格线，线宽1px，暗褐色 
    * 表头字：黄色，字号：16px
    * 数据字：白色，字号：16px
    * 不显示“持仓数据表”字样，直接显示表头及数据列 
  
8、席位数据表（右列上二格，高度30%）
  8.1 功能设置
    * 按照系统需求4.3的要求显示相关数据
  8.2 布局说明
    * 页面显示8行8列，滚动支持显示全部席位数据
    * 用-Dash DataTable实现表格 
    * 表头：｜席位名称｜盈亏15｜盈亏60｜盈亏120｜空列｜趋势05｜趋势15｜趋势30｜
  8.3 显示要素
    * 表头设置排序按钮，支持双向排序
    * 显示表格线，线宽1px，暗褐色 
    * 表头字：黄色，字号：16px
    * 数据字：白色，字号：16px
    * 不显示“席位数据表”字样，直接显示表头及数据列 
  
9、按钮区（右列上三格，高度10%）
  9.1 功能设置
    * 通过按钮区的按钮操作，在指标区显示对应的指标组内容
    * 右键功能支持：右键点击品种显示框选择“加入自选”将该品种加入自选列表
    * 点击“品种显示框”内的品种简称，刷新K线区，指标区，持仓数据表，席位数据表
    * 点击“实多空”，“净多空”，“流多空”按钮，指标区切换到模版1显示方式
    * 点击“净持六”，“趋势六”，“盈亏六”，“饼图二”，指标区切换到模版2显示方式
    * 点击“副页面”按钮，跳转到副页面
  9.2 布局说明
    * 用Dash Ag Grid实现该表格
    * 第一行分为3列，分别放置3个控件，从左到右分别是
      # 简拼输入框（带下拉）:在输入框输入拼音首字母（例:螺纹钢—LWG），下拉框自动弹出，显示与输入内容匹配的品种简称
      # 品种显示框：在左侧简拼输入下拉中，点选某品种，该品种的品种简称就显示在这个显示框中，
      # “副页面”按钮：点击该按钮跳转到副页面   
    * 第二行分为7列，分别放置7个按钮：
      # ｜实多空｜净多空｜流多空｜净持六｜趋势六｜盈亏六｜饼图二｜     
  9.3 显示要素
    * 无表头
    * 不显示标签，比如“按钮区”字样
    * 不显示表格分割线 
    * 第一行及第二行的所有字符，字号均为18px，白色
    * 第二列的七个按钮使用多颜色区分
  
10、自选列表（右列下格，高度30%）：
  10.1 功能设置
    * 用于存放通过K线区右键和品种显示框右键选中的品种
    * 点击自选股列表中的按钮，同时刷新K线区，指标区，持仓数据表，席位数据表
    * 右键点击列表中的按钮，选择“删除自选”，则该品种在自选列表中被删除 
    * 支持鼠标按住后移动按钮排位
    * 有品种被删除时，后面的品种向上填充空位
  10.2 布局说明 
    * 页面内显示8行8列，滚到支持到显示14行数据
    * 用Dash Ag Grid方式做表格
    * 无表头，无实际数据，每个格内只放置一个按钮，用于显示品种简称
  10.3 显示要素
    * 显示表格线，线宽1px，暗褐色
    * 不显示“自选列表”类的标签
    * 表格内字号为16px，白色
  
三、副页面
1，副页面总体原则
  1.1 副页面尺寸为：长度25%（占视口长度比）高度75%（视口高度）  
  1.2 点击主页面的“副页面”按钮跳转到副页面
  1.3 关闭副页面自动跳转到主页面
  1.4 使用Flexbox 实现副页面的垂直分割，上下比例为2:1，上格是筛选条件表，下格是选择结果表
2、筛选条件表
  2.1 功能设置 
    * 遵照系统需求书4.9的要求布置筛选条件
    * 支持多条件组合筛选
    * 筛选结果导出到“选择结果表”（本页面）
  2.2 布局说明 
    * 共十行六列，全部显示无需滚动
    * 用Dash Ag Grid方式实现该表格
    * 第一行分为3列
      # 第一列书写文字“条件筛选表”
      # 第二列是按钮“执行筛选”
      # 第三列是按钮“导出结果”  
    * 第二行到第十行为六列均匀分布，内容按照下面要求：
      # 第二行: 收 盘 价|   是   ｜(5/8/13/21)|      的    |(最大/最小) |{选择/放弃}
      # 第三行: 实   多|(10/20/X)|(大于/小于) |     实空   | (10/20/X) |{选择/放弃}
      # 第四行: 净   多|(10/20/X)|(大于/小于) |     净空   | (10/20/X) |{选择/放弃}
      # 第五行: 实   多|(10/20/X)|   是      |(5/8/13/21）|(最大/最小) |{选择/放弃}
      # 第六行: 实   空|(10/20/X)|   是      |(5/8/13/21)|(最大/最小) |{选择/放弃}
      # 第七行: 实   差|(10/20/X)|   是      |(5/8/13/21)|(最大/最小) |{选择/放弃}
      # 第八行: 净   多|(10/20/X)|   是      |(5/8/13/21)|(最大/最小) |{选择/放弃}
      # 第九行: 净   空|(10/20/X)|   是      |(5/8/13/21)|(最大/最小) |{选择/放弃}
      # 第十行: 净   差|(10/20/X)|   是      |(5/8/13/21)|(最大/最小) |{选择/放弃}
    * 图例说明1 ｜：表示列分割线； (10/20/X)/(5/8/13/21)/(大于/小于)/(最大/最小)/：表示下拉框选择；
    * 图例说明2 {选择/放弃}：选择框（非下拉框），点击该框循环显示“对号”和空白，显示对号时，表示选择此行条件，空白表示不选择该行条件
  2.3 显示要素：
    * 不用再显示标签，例如“筛选条件表”
    * 显示表格线，线宽1px，暗褐色
    * 所有控件内字号都是16px，白色
3、筛选结果表（占视口高度的25%）
  3.1 功能设置
    * 存放筛选结果表导出的筛选结果
    * 有新的筛选结果被导入时，刷新原表的内容
    * 点击列表中的按钮，同时刷新K线区，指标区，持仓数据表，席位数据表
  3.2 布局要求
    * 页面显示6行6列，滚动支持显示12行
    * 用Dash Ag Grid方式实现该表格
    * 无表头，每个表格内都放置一个按钮，显示品种简称
  3.3 显示要素：
    * 不显示标签，例如“筛选结果表”
    * 不显示表头 
    * 显示表格线，线宽1px，暗褐色
    * 表格内字号为16px，白色 